<?xml version="1.0"?>

<f:view
	xmlns="http://www.w3.org/1999/xhtml"
	xmlns:f="http://xmlns.jcp.org/jsf/core"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
>
	<h:head></h:head>
	<h:body>
		<ui:composition template="../template.xhtml">
			<ui:define name="main">
				<fieldset>
					<legend>
						<h:outputText value="#{i18n[epf_persistence_entity.entity.type]}"></h:outputText>
					</legend>
					<ui:repeat 
						rendered="#{epf_persistence_entity.preLoad() and not empty epf_persistence_entity.attributes}" 
						var="attributeVar" 
						value="#{epf_persistence_entity.attributes}">
						<fieldset>
							<legend>
								<h:outputLabel value="#{attributeVar.attribute.name}" ></h:outputLabel>
							</legend>
							<h:inputText 
								rendered="#{attributeVar.basic}" 
								value="#{attributeVar.value}" 
								styleClass="#{style.css(epf_persistence_entity.entity.type.concat('.').concat(attributeVar.attribute.name))}"></h:inputText>
							<ui:repeat 
								rendered="#{attributeVar.embedded}" 
								var="embeddedAttributeVar" 
								value="#{epf_persistence_entity.getEmbeddedAttribute(attributeVar).attributes}">
								<h:outputLabel value="#{embeddedAttributeVar.attribute.name}" ></h:outputLabel>
								<h:inputText 
									rendered="#{embeddedAttributeVar.basic}" 
									value="#{embeddedAttributeVar.value}"
									styleClass="#{style.css(epf_persistence_entity.entity.type.concat('.').concat(attributeVar.attribute.name).concat('.').concat(embeddedAttributeVar.attribute.name))}"></h:inputText>
								<h:selectOneMenu 
									rendered="#{embeddedAttributeVar.singular}" 
									value="#{embeddedAttributeVar.value}"
									styleClass="#{style.css(epf_persistence_entity.entity.type.concat('.').concat(attributeVar.attribute.name).concat('.').concat(embeddedAttributeVar.attribute.name))}">
									<f:selectItems 
										value="#{epf_persistence_entity.getAssociationValues(embeddedAttributeVar)}" 
										var="embeddedValueVar" 
										itemLabel="#{embeddedValueVar.toString()}" 
										itemValue="#{embeddedValueVar.id}"></f:selectItems>
								</h:selectOneMenu>
								<h:selectManyMenu 
									rendered="#{embeddedAttributeVar.plural}" 
									value="#{embeddedAttributeVar.values}" 
									styleClass="#{style.css(epf_persistence_entity.entity.type.concat('.').concat(attributeVar.attribute.name).concat('.').concat(embeddedAttributeVar.attribute.name))}">
									<f:selectItems 
										value="#{epf_persistence_entity.getAssociationValues(embeddedAttributeVar)}" 
										var="embeddedValueVar" 
										itemLabel="#{embeddedValueVar.toString()}" 
										itemValue="#{embeddedValueVar.id}"></f:selectItems>
								</h:selectManyMenu>
							</ui:repeat>
							<h:selectOneMenu 
								rendered="#{attributeVar.singular}" 
								value="#{attributeVar.value}" 
								styleClass="#{style.css(epf_persistence_entity.entity.type.concat('.').concat(attributeVar.attribute.name))}">
								<f:selectItems 
									value="#{epf_persistence_entity.getAssociationValues(attributeVar)}" 
									var="valueVar" 
									itemLabel="#{valueVar.toString()}" 
									itemValue="#{valueVar.id}"></f:selectItems>
							</h:selectOneMenu>
							<h:selectManyMenu 
								rendered="#{attributeVar.plural}" 
								value="#{attributeVar.values}" 
								styleClass="#{style.css(epf_persistence_entity.entity.type.concat('.').concat(attributeVar.attribute.name))}">
								<f:selectItems 
									value="#{epf_persistence_entity.getAssociationValues(attributeVar)}" 
									var="valueVar" 
									itemLabel="#{valueVar.toString()}" 
									itemValue="#{valueVar.id}"></f:selectItems>
							</h:selectManyMenu>
						</fieldset>
					</ui:repeat>
				</fieldset>
				<h:commandButton 
					action="#{epf_persistence_entity.merge}" 
					value="#{i18n['epf.persistence.entity.merge']}"></h:commandButton>
				<h:commandButton 
					action="#{epf_persistence_entity.remove}" 
					value="#{i18n['epf.persistence.entity.remove']}"></h:commandButton>
			</ui:define>
		</ui:composition>
	</h:body>
</f:view>
